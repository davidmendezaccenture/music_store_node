<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rat Pack Instruments</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="../css/style_cart.css" />
    <link rel="stylesheet" href="../css/styles.css" />
    <!-- Fuente seleccionada para usar en el proyecto-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Asset&display=swap"
      rel="stylesheet"
    />
    <!-- icono tittle -->
    <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
  </head>
  <body>
    <!-- Cabecera de la página -->
    <div id="header"></div>

    <!-- ::::::::::::::::::::::: FIN HEADER ::::::::::::::::::::::: -->

    <!-- Contenido principal de la página -->

    <!-- Loader de la página hasta que carga productos -->
    <div id="cart-loader" class="text-center my-5">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
    </div>

    <main
      class="container py-4 mt-5"
      role="main"
      aria-label="Carrito de la compra"
    >
      <div class="row">
        <!-- Columna izquierda: productos -->
        <div class="col-lg-8" role="list">
          <!-- Botón para volver a Home -->
          <div class="mb-4">
            <a
              href="/pages/index.html"
              class="btn btn-primary rounded-pill px-4 regular-btn"
              aria-label="Volver al inicio"
              >Volver</a
            >
          </div>
          <!-- Título -->
          <h2 class="h1 mb-2">Carrito</h2>
          <!-- Carrito vacío -->
          <div
            id="cart-empty"
            class="text-center my-5"
            role="status"
            aria-live="polite"
          >
            <img
              src="/assets/images/emptycart.png"
              alt="Carrito vacío"
              class="img-emptycart"
            />
            <h2 class="mt-3">Tu carrito está vacío</h2>
            <p>¡Añade productos para verlos aquí!</p>
            <a
              href="/pages/index.html"
              class="btn btn-primary rounded-pill px-4 clear-btn"
              >Volver a la tienda</a
            >
          </div>
          <!-- Contenedor donde se renderizan los productos del carrito dinámicamente -->
          <div id="cart-content"></div>
          <!-- Template para los items del carrito -->
          <template id="cart-item-template">
            <div
              class="card mb-3 cart-item"
              data-id=""
              role="listitem"
              aria-label="Producto en el carrito"
            >
              <div class="row g-0 align-items-center flex-row">
                <!-- Imagen: ocupa 3 columnas en móvil y 2 en md+ -->
                <div class="col-3 col-md-2 text-center">
                  <img
                    src=""
                    class="img-fluid rounded"
                    alt="Imagen del producto"
                    style="max-width: 80px"
                  />
                </div>
                <!-- Info: ocupa 9 columnas en móvil y 3 en md+ -->
                <div class="col-9 col-md-3">
                  <div class="card-body">
                    <h5 class="card-title mb-1"></h5>
                    <p class="card-text mb-1"></p>
                  </div>
                </div>
                <div class="col-6 col-md-2 text-center">
                  <span class="fw-bold price"></span>
                </div>
                <div class="col-6 col-md-3 text-center">
                  <div
                    class="input-group justify-content-center cart-qty-group"
                  >
                    <button
                      class="btn btn-outline-secondary btn-sm btn-decrease"
                      type="button"
                      aria-label="Disminuir cantidad"
                    >
                      -
                    </button>
                    <input
                      type="text"
                      class="form-control text-center mx-1 cart-qty-input"
                      value="1"
                      style="width: 40px; display: inline-block"
                      readonly
                    />
                    <button
                      class="btn btn-outline-secondary btn-sm btn-increase"
                      type="button"
                      aria-label="Aumentar cantidad"
                    >
                      +
                    </button>
                  </div>
                </div>
                <div class="col-12 col-md-2 text-center mt-2 mt-md-0">
                  <button
                    class="btn btn-primary rounded-pill px-2 px-md-4 btn-remove delete-product-btn"
                    aria-label="Eliminar producto"
                  >
                    Eliminar
                  </button>
                </div>
              </div>
            </div>
          </template>
        </div>
        <!-- Columna derecha: resumen y métodos de pago -->
        <div
          class="col-lg-4"
          id="cart-summary-col"
          role="region"
          aria-label="Resumen del carrito"
        >
          <div id="cart-summary"></div>
          <template id="cart-summary-template">
            <div class="card p-4 mb-4 shadow-sm">
              <h3 class="fw-bold mb-3 text-center total"></h3>
              <p class="text-center text-muted mb-3">
                Todos los precios incluyen IVA.
              </p>
              <a href="#" class="btn btn-dark btn-lg w-100 mb-3 btn-checkout"
                >IR A CAJA &rarr;</a
              >
              <div class="border rounded p-3 mb-3 bg-light">
                <div class="d-flex justify-content-between align-items-center">
                  <span
                    ><i class="bi bi-truck"></i>
                    <strong>Entrega ordinaria</strong></span
                  >
                  <span class="text-success fw-bold">gratis</span>
                </div>
                <small class="text-muted"
                  >Se espera entre el Ma., 1.07. y el Mi., 2.07.</small
                >
                <a href="#" class="d-block mt-2 small"
                  >Información del envío <i class="bi bi-box-arrow-up-right"></i
                ></a>
              </div>
              <div class="mb-2">
                <a
                  href="#"
                  class="btn btn-outline-secondary w-100 mb-2 d-flex align-items-center justify-content-between"
                >
                  <span>Pagar con PayPal Express</span>
                  <img
                    src="/assets/images/paypal.png"
                    alt="PayPal"
                    style="height: 24px"
                  />
                </a>
                <a
                  href="#"
                  class="btn btn-outline-secondary w-100 d-flex align-items-center justify-content-between"
                >
                  <span>Pagar con Amazon Pay</span>
                  <img
                    src="/assets/images/amazon-icon.png"
                    alt="Amazon Pay"
                    style="height: 24px"
                  />
                </a>
              </div>
            </div>
          </template>
        </div>
      </div>

      <!-- Botón para seguir comprando -->
      <div class="d-flex justify-content-center">
        <button
          id="seguirComprandoBtn"
          class="btn btn-primary rounded-pill px-4 regular-btn mb-4"
          aria-label="Seguir comprando y volver a la tienda"
        >
          Seguir comprando
        </button>
      </div>

      <!-- Modal de confirmación para eliminar -->
      <div
        class="modal fade custom-delete-modal"
        id="deleteConfirmModal"
        tabindex="-1"
        aria-labelledby="deleteConfirmLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="deleteConfirmLabel">
                Eliminar producto
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Cerrar"
              ></button>
            </div>
            <div class="modal-body">
              ¿Estás seguro de que quieres eliminar este producto del carrito?
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-primary rounded-pill px-4 cancel-button"
                data-bs-dismiss="modal"
              >
                Cancelar
              </button>
              <button
                type="button"
                class="btn btn-primary rounded-pill px-4 delete-product-btn"
                id="confirmDeleteBtn"
              >
                Eliminar
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Modal para usuarios guest -->
      <div
        class="modal fade custom-delete-modal"
        id="guestCheckoutModal"
        tabindex="-1"
        aria-labelledby="guestCheckoutLabel"
        aria-hidden="true"
      >
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="guestCheckoutLabel">
                <i class="bi bi-person-exclamation fs-2"></i>
              </h5>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Cerrar"
              ></button>
            </div>
            <div class="modal-body">
              ¿Tienes cuenta?.<br />
              <strong>Regístrate para continuar con la compra.</strong>
            </div>
            <div class="modal-footer">
              <a
                href="/pages/register.html"
                class="btn btn-primary rounded-pill px-4 auth-button"
                >Registrarse</a
              >
              <button
                type="button"
                class="btn btn-primary rounded-pill px-4 close-button"
                data-bs-dismiss="modal"
              >
                Cerrar
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>

  <!-- Modal de búsqueda global -->
  <div id="globalSearchDropdown" class="search-bar py-1 buscador shadow" style="display:none; position:absolute; z-index:1055; min-width:350px;">
    <div class="container">
      <form class="d-flex justify-content-center buscador-form" role="search" aria-label="Barra de búsqueda global">
        <!-- <div class="buscador-input-wrapper position-relative w-100" style="max-width: 400px">
          <input
            class="form-control control-buscador rounded-pill pe-5"
            type="search"
            placeholder="Buscar productos..."
            aria-label="Buscador global"
            id="global-search-input"
            autocomplete="off"
          />
          <button
            class="btn btn-link lupa-inside-input position-absolute top-50 end-0 translate-middle-y p-0"
            type="submit"
            aria-label="Buscar"
          >
            <i class="bi bi-search fs-5"></i>
          </button>
        </div> -->
      </form>
      <div id="global-search-results" class="mt-2"></div>
    </div>
  </div>

    <!-- ::::::::::::::::::::::: FIN CONTENIDO PRINCIPAL ::::::::::::::::::::::: -->

    <!-- Footer -->
    <div id="footer"></div>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/app.js"></script>
    <script src="../js/contact.js"></script>
    <script src="../js/cart.js"></script>
    <script src="../js/register.js"></script><script src="../js/header.js"></script>
  </body>
</html>
